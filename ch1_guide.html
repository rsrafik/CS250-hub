<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Computer Architecture - Chapter 1 Study Guide</title>
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Archivo+Black&family=Work+Sans:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --color-bg: #0a0e27;
        --color-primary: #00d9ff;
        --color-secondary: #ff006e;
        --color-accent: #ffbe0b;
        --color-green: #06ffa5;
        --color-purple: #b185ff;
        --color-text: #e0e6f0;
        --color-text-dim: #8892b0;
      }

      body {
        font-family: "Work Sans", sans-serif;
        background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
        color: var(--color-text);
        padding: 20px;
        line-height: 1.4;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: rgba(26, 31, 58, 0.7);
        border: 2px solid var(--color-primary);
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 0 40px rgba(0, 217, 255, 0.2);
      }

      .header {
        text-align: center;
        margin-bottom: 20px;
        position: relative;
        padding-bottom: 15px;
        border-bottom: 3px solid var(--color-primary);
      }

      .header h1 {
        font-family: "Archivo Black", sans-serif;
        font-size: 2.8em;
        color: var(--color-primary);
        text-transform: uppercase;
        letter-spacing: 3px;
        text-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
        margin-bottom: 5px;
      }

      .header .subtitle {
        font-size: 1.2em;
        color: var(--color-accent);
        font-weight: 600;
      }

      .grid {
        display: grid;
        /* >>>>>>>>>>>>>>>>>>>>>>>>> FIX 1: Auto-fit for automatic wrapping <<<<<<<<<<<<<<<<<<<<<<<<<<<< */
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 15px;
        margin-bottom: 15px;
      }

      /* Step down to two columns a bit earlier to avoid skinny cards */
      /* This media query is now mostly redundant but can remain */
      @media (max-width: 1200px) {
        /*
        .grid {
          grid-template-columns: repeat(2, minmax(320px, 1fr));
        }
        */
      }

      /* Single-column on narrow screens; wide/full collapse */
      @media (max-width: 820px) {
        .grid {
          grid-template-columns: 1fr;
        }
        /* >>>>>>>>>>>>>>>>>>>>>>>>> FIX 2: Override wide spans to 1 column <<<<<<<<<<<<<<<<<<<<<<<<<<<< */
        .performance-section,
        .benchmark-section {
          grid-column: span 1 !important;
        }
        .wide-section,
        .full-width {
          grid-column: span 1 !important;
        }
      }

      /* Collapse internal two-column helpers on narrow screens */
      @media (max-width: 1100px) {
        .two-col,
        .benchmark-grid {
          grid-template-columns: 1fr !important;
        }
      }

      .section {
        background: rgba(0, 0, 0, 0.4);
        border-radius: 8px;
        padding: 15px;
        border-left: 4px solid var(--color-secondary);
        position: relative;
        overflow: hidden;
      }

      .section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(
          90deg,
          transparent,
          var(--color-primary),
          transparent
        );
        opacity: 0.5;
      }

      .section-title {
        font-family: "Archivo Black", sans-serif;
        font-size: 1.1em;
        color: var(--color-accent);
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .idea-list {
        list-style: none;
      }

      .idea-list li {
        font-size: 0.85em;
        margin-bottom: 6px;
        padding-left: 18px;
        position: relative;
        color: var(--color-text-dim);
      }

      .idea-list li::before {
        content: "‚ñ∏";
        position: absolute;
        left: 0;
        color: var(--color-green);
        font-weight: bold;
      }

      .idea-list li strong {
        color: var(--color-text);
      }

      .formula-box {
        background: rgba(0, 217, 255, 0.05);
        border: 1px solid var(--color-primary);
        border-radius: 6px;
        padding: 10px;
        margin: 8px 0;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85em;
        color: var(--color-primary);
        text-align: center;
      }

      .formula-label {
        font-size: 0.75em;
        color: var(--color-accent);
        font-weight: 600;
        margin-bottom: 4px;
      }

      .key-point {
        background: rgba(255, 190, 11, 0.1);
        border-left: 3px solid var(--color-accent);
        padding: 8px;
        margin: 8px 0;
        font-size: 0.85em;
        border-radius: 4px;
      }

      .performance-section {
        grid-column: span 2;
        border-left-color: var(--color-primary);
      }

      .power-section {
        border-left-color: var(--color-green);
      }

      .benchmark-section {
        grid-column: span 2;
        border-left-color: var(--color-purple);
      }

      .fallacy-section {
        border-left-color: var(--color-secondary);
      }

      .two-col {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        font-size: 0.85em;
      }

      .metric {
        background: rgba(255, 255, 255, 0.05);
        padding: 8px;
        border-radius: 4px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .metric-name {
        color: var(--color-accent);
        font-weight: 600;
        font-size: 0.9em;
      }

      .highlight {
        color: var(--color-green);
        font-weight: 600;
      }

      .red-highlight {
        color: var(--color-secondary);
        font-weight: 600;
      }

      ul.compact {
        list-style: none;
        margin-left: 0;
      }

      ul.compact li {
        font-size: 0.8em;
        margin-bottom: 4px;
        padding-left: 12px;
        position: relative;
      }

      ul.compact li::before {
        content: "‚Ä¢";
        position: absolute;
        left: 0;
        color: var(--color-primary);
      }

      .benchmark-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        margin-top: 8px;
      }

      .bench-item {
        background: rgba(0, 0, 0, 0.3);
        padding: 6px;
        border-radius: 4px;
        font-size: 0.8em;
        border: 1px solid rgba(177, 133, 255, 0.3);
      }

      .footer-formulas {
        background: rgba(255, 0, 110, 0.1);
        border: 2px dashed var(--color-secondary);
        border-radius: 8px;
        padding: 12px;
        margin-top: 15px;
      }

      .formula-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
      }

      /* Responsive wrap for formula grid */
      @media (max-width: 720px) {
        .formula-grid {
          grid-template-columns: 1fr;
        }
      }

      /* Inline-grid responsiveness (overrides inline template cols on narrow screens) */
      @media (max-width: 1200px) {
        div[style*="display: grid"][style*="grid-template-columns"] {
          grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)) !important;
        }
      }
      @media (max-width: 720px) {
        div[style*="display: grid"][style*="grid-template-columns"] {
          grid-template-columns: 1fr !important;
        }
      }

      .footer-formulas .section-title {
        position: relative;
      }

      /* Quick-ref button (top right) */
      .qr-toggle-btn {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        border: 1px solid var(--color-secondary);
        background: rgba(0, 0, 0, 0.4);
        color: var(--color-secondary);
        font-family: "IBM Plex Mono", monospace;
        font-size: 0.6em;
        padding: 6px 10px;
        border-radius: 6px;
        cursor: pointer;
      }

      .qr-toggle-btn:hover {
        box-shadow: 0 0 10px rgba(255, 0, 110, 0.35);
      }

      .mini-formula {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.75em;
        color: var(--color-text);
        background: rgba(0, 0, 0, 0.4);
        padding: 6px;
        border-radius: 4px;
        border: 1px solid rgba(255, 0, 110, 0.3);
      }

      /* ============================
          ‚úÖ FLIP CARD WITH BLANK BACK
          - Entire card flips in 3D
          - Back side is completely blank
          ============================ */
      .quiz-flip {
        cursor: pointer;
        user-select: none;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
      }

      .quiz-flip.is-flipped {
        transform: rotateY(180deg);
      }

      /* Front content - participates in 3D flip but hidden when facing back */
      .quiz-flip > * {
        backface-visibility: hidden;
        transform: rotateY(0deg);
        transform-style: preserve-3d;
        opacity: 1;
      }

      /* When flipping to back, fade out content early */
      .quiz-flip.is-flipped > * {
        opacity: 0;
        transition: opacity 0.2s ease-out 0s;
      }

      /* When unflipping, delay content appearance until halfway through */
      .quiz-flip:not(.is-flipped) > * {
        transition: opacity 0.25s ease-in 0.2s;
      }

      /* Blank back side - covers the content when flipped */
      .quiz-flip::before {
        content: "";
        position: absolute;
        inset: 0;
        background: inherit;
        border-radius: inherit;
        transform: rotateY(180deg);
        backface-visibility: hidden;
        pointer-events: auto;
        transform-style: preserve-3d;
      }

      /* Only apply hover effect when NOT flipped */
      .quiz-flip:not(.is-flipped):hover {
        filter: brightness(1.05);
      }

      /* Ensure flipped cards maintain proper appearance on hover */
      .quiz-flip.is-flipped:hover > * {
        backface-visibility: hidden;
      }

      @media print {
        body {
          background: white;
          padding: 10px;
        }
        .container {
          border: 2px solid black;
          box-shadow: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>‚ö° CHAPTER 1 ‚ö°</h1>
        <div class="subtitle">Performance ‚Ä¢ Power ‚Ä¢ Benchmarks</div>
      </div>

      <div class="grid">
        <div class="section quiz-flip">
          <div class="section-title">üéØ 8 Great Ideas</div>
          <ul class="idea-list">
            <li><strong>Moore's Law:</strong> IC doubles every 18-24mo</li>
            <li><strong>Abstraction:</strong> Hide complexity</li>
            <li><strong>Common Case Fast:</strong> Optimize frequent</li>
            <li><strong>Parallelism:</strong> Do multiple ops at once</li>
            <li><strong>Pipelining:</strong> Flow through stages</li>
            <li><strong>Prediction:</strong> Guess & start early</li>
            <li>
              <strong>Memory Hierarchy:</strong> Fast‚ÜíSmall‚ÜíExpensive at top
            </li>
            <li><strong>Redundancy:</strong> Backup for reliability</li>
          </ul>
        </div>

        <div class="section performance-section quiz-flip">
          <div class="section-title">üìä Performance Metrics</div>
          <div class="two-col">
            <div class="metric">
              <div class="metric-name">Response Time</div>
              Time to complete task<br />
              <span class="red-highlight">‚Üì Lower = Better</span>
            </div>
            <div class="metric">
              <div class="metric-name">Throughput</div>
              Tasks per unit time<br />
              <span class="highlight">‚Üë Higher = Better</span>
            </div>
          </div>

          <div class="key-point">
            <strong>Speedup:</strong> X is n times faster than Y<br />
            <span
              style="font-family: 'JetBrains Mono', monospace; font-size: 0.9em"
            >
              Performance<sub>X</sub> / Performance<sub>Y</sub> = Exec<sub
                >Y</sub
              >
              / Exec<sub>X</sub> = n
            </span>
          </div>

          <div class="formula-box">
            <div class="formula-label">üéØ MASTER EQUATION</div>
            CPU Time = IC √ó CPI √ó Clock Cycle Time
            <div style="margin-top: 5px; font-size: 0.9em">
              = (IC √ó CPI) / Clock Rate
            </div>
          </div>

          <ul class="compact">
            <li><strong>IC:</strong> Instruction Count (# instructions)</li>
            <li><strong>CPI:</strong> Cycles Per Instruction (avg)</li>
            <li><strong>Clock Cycle Time:</strong> 1 / Clock Rate</li>
          </ul>
        </div>

        <div class="section power-section quiz-flip">
          <div class="section-title">‚ö° Power Wall</div>

          <div class="key-point">
            CMOS = primary energy consumer<br />
            Dynamic energy from switching 0‚Üî1
          </div>

          <div class="formula-box">
            <div class="formula-label">ENERGY</div>
            E ‚àù C<sub>load</sub> √ó V¬≤
          </div>

          <div class="formula-box">
            <div class="formula-label">POWER</div>
            P ‚àù ¬Ω √ó C<sub>load</sub> √ó V¬≤ √ó f
          </div>

          <div class="key-point">
            <strong>Problem:</strong> Can't lower V more<br />
            ‚Üí Transistors leak (~40% power!)<br />
            <strong>Result:</strong> Hit power wall üß±
          </div>

          <ul class="compact">
            <li>Power = energy over time</li>
            <li>Must bring power IN & remove heat OUT</li>
            <li>Server chips: 100W+ to cool</li>
          </ul>
        </div>

        <div class="section quiz-flip">
          <div class="section-title">üîÑ CPI Breakdown</div>

          <div class="formula-box">
            <div class="formula-label">CLOCK CYCLES</div>
            CPU cycles = IC √ó CPI<sub>avg</sub>
          </div>

          <div class="formula-box" style="font-size: 0.75em">
            CPI = Œ£(CPI<sub>i</sub> √ó C<sub>i</sub>) / IC
          </div>

          <div class="key-point">
            <strong>Instruction Mix:</strong> Dynamic frequency of instructions
            across programs
          </div>

          <ul class="compact">
            <li>CPI varies by instruction type</li>
            <li>Compare BOTH IC & CPI</li>
            <li>Even if clock rates equal!</li>
          </ul>

          <div class="metric">
            <div class="metric-name">Performance Depends On:</div>
            Algorithm ‚Üí Language ‚Üí Compiler ‚Üí Architecture ‚Üí Hardware
          </div>
        </div>

        <div class="section quiz-flip">
          <div class="section-title">üéØ Amdahl's Law</div>

          <div class="key-point">
            <strong>Law of Diminishing Returns</strong><br />
            Speedup limited by improved portion's usage
          </div>

          <div class="formula-box" style="font-size: 0.75em">
            <div class="formula-label">AMDAHL'S LAW</div>
            Exec<sub>new</sub> = Exec<sub>affected</sub> / Speedup<br />
            + Exec<sub>unaffected</sub>
          </div>

          <div class="key-point">
            If feature = x% of time,<br />
            Max speedup = 1 / x
          </div>

          <ul class="compact">
            <li>80% of time on feature X</li>
            <li>Max possible speedup = 1/0.8 = 1.25√ó</li>
            <li><strong>Can't get 5√ó faster!</strong></li>
          </ul>
        </div>

        <div class="section benchmark-section quiz-flip">
          <div class="section-title">üìà Benchmarking (SPEC)</div>

          <div class="two-col">
            <div>
              <strong class="highlight">SPEC CPU2006</strong>
              <ul class="compact">
                <li>CINT2006: 12 int benchmarks</li>
                <li>CFP2006: 17 FP benchmarks</li>
              </ul>
            </div>
            <div>
              <strong class="highlight">SPEC Power</strong>
              <ul class="compact">
                <li>Power at 0-100% load (10% steps)</li>
                <li>Java business apps (JBB2005)</li>
              </ul>
            </div>
          </div>

          <div class="formula-box">
            <div class="formula-label">SPECratio</div>
            Time<sub>reference</sub> / Time<sub>measured</sub>
          </div>

          <div class="formula-box" style="font-size: 0.75em">
            <div class="formula-label">GEOMETRIC MEAN</div>
            ‚Åø‚àö(‚àè Ratio<sub>i</sub>) = (R‚ÇÅ√óR‚ÇÇ√ó...√óR‚Çô)^(1/n)
          </div>

          <div class="formula-box" style="font-size: 0.75em">
            <div class="formula-label">POWER EFFICIENCY</div>
            ssj_ops/watt = Œ£(ssj_ops) / Œ£(power)
          </div>

          <div class="key-point">
            <strong>Why Geometric Mean?</strong> Same answer regardless of
            reference computer!
          </div>
        </div>

        <div class="section fallacy-section quiz-flip">
          <div class="section-title">‚ö†Ô∏è Fallacies & Pitfalls</div>

          <div class="key-point">
            <strong class="red-highlight">PITFALL 1:</strong> Expecting
            proportional improvement ‚Üí Use Amdahl's Law!
          </div>

          <div class="key-point">
            <strong class="red-highlight">PITFALL 2:</strong> Using partial
            performance equation ‚Üí Need IC √ó CPI √ó Time, not just one!
          </div>

          <ul class="compact">
            <li>‚Üë Clock ‚Üí may ‚Üë CPI (deeper pipeline)</li>
            <li>‚Üì Instructions ‚Üí may ‚Üë CPI (complex)</li>
            <li>‚Üì CPI ‚Üí may ‚Üë Instructions (simpler)</li>
          </ul>

          <div class="key-point">
            <strong class="red-highlight">FALLACY 1:</strong> Low utilization =
            low power<br />
            <span class="highlight">FALSE!</span> Idle ‚âà 50-60% peak power
          </div>

          <div class="key-point">
            <strong class="red-highlight">FALLACY 2:</strong> Performance ‚â†
            Energy efficiency<br />
            <span class="highlight">FALSE!</span> Faster = less time = less
            energy
          </div>
        </div>
      </div>

      <div class="footer-formulas">
        <div
          class="section-title"
          style="text-align: center; margin-bottom: 10px"
        >
          ‚ö° QUICK FORMULA REFERENCE ‚ö°
          <button id="qrToggleAll" class="qr-toggle-btn" type="button">
            Flip all
          </button>
        </div>
        <div class="formula-grid">
          <div class="mini-formula quiz-flip">CPU Time = IC √ó CPI √ó Cycle Time</div>
          <div class="mini-formula quiz-flip">CPU Time = (IC √ó CPI) / Clock Rate</div>
          <div class="mini-formula quiz-flip">CPU Cycles = IC √ó CPI<sub>avg</sub></div>
          <div class="mini-formula quiz-flip">
            CPI = Œ£(CPI<sub>i</sub> √ó C<sub>i</sub>) / IC
          </div>
          <div class="mini-formula quiz-flip">Energy ‚àù C<sub>load</sub> √ó V¬≤</div>
          <div class="mini-formula quiz-flip">Power ‚àù ¬Ω √ó C<sub>load</sub> √ó V¬≤ √ó f</div>
          <div class="mini-formula quiz-flip">
            SPECratio = Time<sub>ref</sub> / Time<sub>measured</sub>
          </div>
          <div class="mini-formula quiz-flip">Geo Mean = ‚Åø‚àö(‚àè Ratio<sub>i</sub>)</div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Simple click-to-flip functionality
        document.addEventListener("click", (e) => {
          // Don't flip if clicking the quick-ref toggle button
          if (e.target.closest("#qrToggleAll")) return;

          const card = e.target.closest(".quiz-flip");
          if (!card) return;

          card.classList.toggle("is-flipped");
        });

        // Quick Reference: flip/unflip all ref items
        const btn = document.getElementById("qrToggleAll");
        const refCards = Array.from(
          document.querySelectorAll(".formula-grid .mini-formula.quiz-flip")
        );

        const anyUnflipped = () =>
          refCards.some((c) => !c.classList.contains("is-flipped"));

        const syncBtn = () => {
          if (!btn) return;
          btn.textContent = anyUnflipped() ? "Flip all" : "Unflip all";
        };

        if (btn) {
          btn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            const flipTo = anyUnflipped();
            refCards.forEach((c) => c.classList.toggle("is-flipped", flipTo));
            syncBtn();
          });
          syncBtn();
        }
      });
    </script>
  </body>
</html>